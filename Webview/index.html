<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" id="favicon" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link
      href="https://fonts.googleapis.com/css2?family=Phetsarath:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+Lao:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <title>Mea Thao Yai Thongvanh Foundation - Empowering Communities in Laos</title>
    <meta property="og:title" content="Mea Thao Yai Thongvanh Foundation" />
    <meta property="og:description" content="Empowering Communities in Laos" />
    <meta property="og:image" content="https://picsum.photos/1200/630" />
    <meta property="og:url" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Mea Thao Yai Thongvanh Foundation" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Mea Thao Yai Thongvanh Foundation" />
    <meta name="twitter:description" content="Empowering Communities in Laos" />
    <meta name="twitter:image" content="https://picsum.photos/1200/630" />
  </head>
  <script>
    const apiUrl = "%VITE_API_URL%";

    const fetchFavicon = async () => {
      try {
        const response = await fetch(`${apiUrl}/api/imageUpload/favicon`);
        if (response.ok) {
          const data = await response.json();
          // Update the favicon
          if (data.imageUrl) {
            const faviconElement = document.getElementById("favicon");
            if (faviconElement) {
              faviconElement.setAttribute("href", data.imageUrl);
            } else {
              const newFaviconElement = document.createElement("link");
              newFaviconElement.rel = "icon";
              newFaviconElement.id = "favicon";
              newFaviconElement.href = data.imageUrl;
              document.head.appendChild(newFaviconElement);
            }
          } else {
            console.error("imageUrl not found in the response data");
          }
        } else {
          console.error("Failed to fetch favicon URL.");
        }
      } catch (error) {
        console.error("Error fetching favicon URL:", error);
      }
    };

    // Fetch and update favicon on page load
    window.onload = () => {
      fetchFavicon();
    };
  </script>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
